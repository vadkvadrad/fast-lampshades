–û—Ç–ª–∏—á–Ω–∞—è –∑–∞–¥–∞—á–∞! –î–ª—è **–±—ã—Å—Ç—Ä–æ–≥–æ, –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ, –Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–µ–≥–æ MVP** –ª—É—á—à–µ –≤—Å–µ–≥–æ –ø–æ–¥–æ–π–¥—ë—Ç **–º–æ–Ω–æ–ª–∏—Ç –Ω–∞ Python + FastAPI**. –≠—Ç–æ –¥–∞—Å—Ç:

- **–ú–∏–Ω–∏–º—É–º –∫–æ–¥–∞** (FastAPI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç OpenAPI, –≤–∞–ª–∏–¥–∞—Ü–∏—é, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é ¬´–∏–∑ –∫–æ—Ä–æ–±–∫–∏¬ª)
- **–ü—Ä–æ—Å—Ç–∞—è –ë–î-—Å—Ö–µ–º–∞**
- **–õ—ë–≥–∫–∏–π –∑–∞–ø—É—Å–∫ –≤ Docker**
- **–ë–µ–∑ –∏–∑–±—ã—Ç–æ—á–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã** (–Ω–∏–∫–∞–∫–∏—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤, Kafka, Vault)

---

## üß∞ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ (–º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –í—ã–±–æ—Ä | –ü–æ—á–µ–º—É |
|----------|-------|--------|
| **–Ø–∑—ã–∫** | Python 3.10+ | –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞, –º–Ω–æ–∂–µ—Å—Ç–≤–æ –±–∏–±–ª–∏–æ—Ç–µ–∫ |
| **–§—Ä–µ–π–º–≤–æ—Ä–∫** | **FastAPI** | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è, OpenAPI docs, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å |
| **ORM** | **SQLAlchemy** + **Alembic** | –ü—Ä–æ—Å—Ç–æ–π –º–∞–ø–ø–∏–Ω–≥, –º–∏–≥—Ä–∞—Ü–∏–∏ |
| **–ë–î** | **PostgreSQL** | –ù–∞–¥—ë–∂–Ω–æ, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ JSON, –ª–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è |
| **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** | **JWT** (–±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è email) | –ü—Ä–æ—Å—Ç–æ, –±–µ–∑–æ–ø–∞—Å–Ω–æ, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Å–µ—Å—Å–∏–π |
| **–ó–∞–ø—É—Å–∫** | **Docker + docker-compose** | –û–¥–∏–Ω —Ñ–∞–π–ª ‚Äî –∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç |
| **–ü—Ä–æ–∫—Å–∏** | **nginx** (–≤ docker-compose) | –û–±—Ä–∞—Ç–Ω—ã–π –ø—Ä–æ–∫—Å–∏, TLS –≤ –±—É–¥—É—â–µ–º |

> üí° **–ü–æ—á–µ–º—É –Ω–µ Go?**  
> –î–ª—è –º–æ–Ω–æ–ª–∏—Ç–∞ –Ω–∞ 1‚Äì2 –¥–Ω—è ‚Äî Python + FastAPI **–±—ã—Å—Ç—Ä–µ–µ** –≤ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –∏ –æ—Ç–ª–∞–¥–∫–µ.

---

## üóÉÔ∏è –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)

–¢—Ä–∏ —Ç–∞–±–ª–∏—Ü—ã ‚Äî —ç—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ:

```sql
-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash TEXT NOT NULL,  -- bcrypt
    created_at TIMESTAMP DEFAULT NOW()
);

-- –¢–æ–≤–∞—Ä—ã
CREATE TABLE products (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    price DECIMAL(10, 2) NOT0 NULL CHECK (price > 0),
    created_at TIMESTAMP DEFAULT NOW()
);

-- –ö–æ—Ä–∑–∏–Ω–∞ (–∞–∫—Ç–∏–≤–Ω–∞—è)
CREATE TABLE carts (
    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
    product_id INTEGER REFERENCES products(id) ON DELETE CASCADE,
    quantity INTEGER NOT NULL CHECK (quantity > 0),
    PRIMARY KEY (user_id, product_id)
);

-- –ó–∞–∫–∞–∑—ã
CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    user_id INTEGER NOT NULL REFERENCES users(id),
    total_amount DECIMAL(10, 2) NOT NULL,
    status VARCHAR(20) NOT NULL DEFAULT 'pending',  -- 'pending', 'paid', 'cancelled'
    created_at TIMESTAMP DEFAULT NOW()
);

-- –°–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞ (–¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏)
CREATE TABLE order_items (
    order_id INTEGER REFERENCES orders(id) ON DELETE CASCADE,
    product_id INTEGER NOT NULL,
    product_name VARCHAR(255) NOT NULL,  -- snapshot –Ω–∞ –º–æ–º–µ–Ω—Ç –∑–∞–∫–∞–∑–∞
    product_price DECIMAL(10, 2) NOT NULL,
    quantity INTEGER NOT NULL,
    PRIMARY KEY (order_id, product_id)
);
```

> ‚úÖ **–ù–µ—Ç —Ç–∞–±–ª–∏—Ü—ã "–æ–ø–ª–∞—Ç–∞"** ‚Äî —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ `paid` = mock-–æ–ø–ª–∞—Ç–∞.

---

## üß© –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (FastAPI)

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `POST /auth/register` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (`email`, `password`)
- `POST /auth/login` ‚Äî –≤—Ö–æ–¥ ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `access_token` (JWT)

### üõçÔ∏è –¢–æ–≤–∞—Ä—ã
- `GET /products` ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤ (–ø—É–±–ª–∏—á–Ω—ã–π)

### üõí –ö–æ—Ä–∑–∏–Ω–∞ (—Ç—Ä–µ–±—É–µ—Ç JWT)
- `POST /cart/items` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä (`product_id`, `quantity`)
- `DELETE /cart/items/{product_id}` ‚Äî —É–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä
- `GET /cart` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â—É—é –∫–æ—Ä–∑–∏–Ω—É (—Ç–æ–≤–∞—Ä—ã + –∏—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞)

### üì¶ –ó–∞–∫–∞–∑—ã (—Ç—Ä–µ–±—É–µ—Ç JWT)
- `POST /orders` ‚Äî –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑ (–∫–æ–ø–∏—Ä—É–µ—Ç –∫–æ—Ä–∑–∏–Ω—É ‚Üí `orders` + `order_items`, –æ—á–∏—â–∞–µ—Ç –∫–æ—Ä–∑–∏–Ω—É)
- `POST /orders/{order_id}/pay` ‚Äî **mock-–æ–ø–ª–∞—Ç–∞** ‚Üí —Å—Ç–∞—Ç—É—Å `paid`
- `POST /orders/{order_id}/cancel` ‚Äî –æ—Ç–º–µ–Ω–∞ (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å—Ç–∞—Ç—É—Å `pending`)

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–º–æ–Ω–æ–ª–∏—Ç)

```
lampshades-mvp/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ main.py          # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ FastAPI
‚îÇ   ‚îú‚îÄ‚îÄ models.py        # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ schemas.py       # Pydantic —Å—Ö–µ–º—ã (–≤–∞–ª–∏–¥–∞—Ü–∏—è)
‚îÇ   ‚îú‚îÄ‚îÄ auth.py          # JWT, —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ database.py      # –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
‚îÇ   ‚îî‚îÄ‚îÄ api/
‚îÇ       ‚îú‚îÄ‚îÄ auth.py      # —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã /auth
‚îÇ       ‚îú‚îÄ‚îÄ products.py  # —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã /products
‚îÇ       ‚îú‚îÄ‚îÄ cart.py      # —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã /cart
‚îÇ       ‚îî‚îÄ‚îÄ orders.py    # —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã /orders
‚îú‚îÄ‚îÄ alembic/             # –º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ docker-compose.yml
‚îî‚îÄ‚îÄ requirements.txt
```

---

## üê≥ docker-compose.yml (–≤—Å—ë –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ)

```yaml
version: '3.8'

services:
  backend:
    build: .
    environment:
      - DATABASE_URL=postgresql://user:password@db:5432/lampshades
    depends_on:
      - db

  db:
    image: postgres:15
    environment:
      POSTGRES_DB: lampshades
      POSTGRES_USER: user
      POSTGRES_PASSWORD: password
    volumes:
      - postgres_data:/var/lib/postgresql/data

volumes:
  postgres_data:
```

---

## ‚öôÔ∏è requirements.txt

```txt
fastapi==0.110.0
uvicorn[standard]==0.27.0
sqlalchemy==2.0.25
psycopg2-binary==2.9.9
python-jose[cryptography]==3.3.0
passlib[bcrypt]==1.7.4
alembic==1.13.1
python-multipart==0.0.9
```

---

## üß™ –ß—Ç–æ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏

| –í–∞—à–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è |
|----------------|-----------|
| –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–≤—Ö–æ–¥ | JWT, bcrypt, `/auth/register`, `/auth/login` |
| –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–æ–≤ | `GET /products` (–ø—É–±–ª–∏—á–Ω—ã–π) |
| –ö–æ—Ä–∑–∏–Ω–∞ | –¢–∞–±–ª–∏—Ü–∞ `carts`, CRUD —á–µ—Ä–µ–∑ API |
| –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ | –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ `carts` ‚Üí `orders` + `order_items`, –æ—á–∏—Å—Ç–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã |
| –û—Ç–º–µ–Ω–∞ –∑–∞–∫–∞–∑–∞ | –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ `status = 'pending'` |
| Mock-–æ–ø–ª–∞—Ç–∞ | `POST /orders/{id}/pay` ‚Üí `status = 'paid'` |

---

## ‚ö†Ô∏è –ß—Ç–æ —è —É–ø—Ä–æ—Å—Ç–∏–ª (–∏ —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è MVP)

1. **–ù–µ—Ç —Ä–æ–ª–µ–π** ‚Äî –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Ä–∞–≤–Ω—ã (–Ω–µ—Ç admin/seller)
2. **–ù–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞–º–∏** ‚Äî —Ç–æ–≤–∞—Ä—ã –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω—ã –∏–ª–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ SQL (–¥–ª—è –¥–µ–º–æ ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ 5‚Äì10 —Ç–æ–≤–∞—Ä–æ–≤)
3. **–ù–µ—Ç –æ—Ç–∑—ã–≤–æ–≤, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π** ‚Äî –≤—ã —Å–∞–º–∏ –∏—Å–∫–ª—é—á–∏–ª–∏
4. **–ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ email** ‚Äî –ø–∞—Ä–æ–ª—å + email = –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ
5. **–ù–µ—Ç –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–π –æ–ø–ª–∞—Ç—ã** ‚Äî mock —á–µ—Ä–µ–∑ —Å–º–µ–Ω—É —Å—Ç–∞—Ç—É—Å–∞

> üí° **–î–ª—è –¥–µ–º–æ**: —Å–æ–∑–¥–∞–π—Ç–µ 5 —Ç–æ–≤–∞—Ä–æ–≤ —á–µ—Ä–µ–∑ `INSERT` –≤ PostgreSQL ‚Äî —ç—Ç–æ–≥–æ —Ö–≤–∞—Ç–∏—Ç.

---

## üöÄ –ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (1‚Äì2 –¥–Ω—è)

1. **–î–µ–Ω—å 1**:
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–≤—Ö–æ–¥/JWT)
   - –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª–∏ –ë–î, –º–∏–≥—Ä–∞—Ü–∏–∏
   - –°–¥–µ–ª–∞—Ç—å CRUD –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ)

2. **–î–µ–Ω—å 2**:
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ—Ä–∑–∏–Ω—É (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ)
   - –°–¥–µ–ª–∞—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ + mock-–æ–ø–ª–∞—Ç—É
   - –ù–∞–ø–∏—Å–∞—Ç—å `docker-compose.yml` –∏ `Dockerfile`
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ Swagger UI (`/docs`)

---

## ‚úÖ –ò—Ç–æ–≥

–≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥:
- **–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–µ–Ω** (3 —Ç–∞–±–ª–∏—Ü—ã, 1 —Å–µ—Ä–≤–∏—Å)
- **–ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤–∞—à–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è**
- **–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π**: `docker-compose up --build`
- **–ò–º–µ–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é** (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è Swagger UI)
- **–õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ–º** (–µ—Å–ª–∏ –≤–¥—Ä—É–≥ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –±–æ–ª—å—à–µ —Ñ—É–Ω–∫—Ü–∏–π)
- –°–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤

–ì–æ—Ç–æ–≤ –ø–æ–º–æ—á—å —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π!
